"use strict";angular.module("bestOfYoutubeApp",["ngRoute","ngSanitize","firebase","ngMaterial","ngMdIcons"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/admin",{templateUrl:"views/admin.html",controller:"AdminCtrl",controllerAs:"admin"}).when("/group/:id",{templateUrl:"views/group.html",controller:"GroupIdCtrl",controllerAs:"group"}).otherwise({redirectTo:"/"})}]),angular.module("bestOfYoutubeApp").controller("MainCtrl",["$scope","$http","$firebaseObject","$firebaseArray",function(a,b,c,d){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var e=new Firebase("https://the-best-of-youtube.firebaseio.com/urls"),f=new Firebase("https://the-best-of-youtube.firebaseio.com/data"),g=c(f);g.$bindTo(a,"data"),a.urls=d(e),a.upvote=function(b){console.log(b.$id);var c=a.urls.$getRecord(b.$id);c.upvotes++,a.urls.$save(c).then(function(){console.log(a.urls)})};a.getYoutube=function(c){var d=function(a,b){var c=RegExp("[?&]"+a+"=([^&]*)").exec(b);return c&&decodeURIComponent(c[1].replace(/\+/g," "))},e="";if(/youtu.be/.test(c)){console.log("Mobile URL");var f=RegExp(".be/([^]*)").exec(c);f=decodeURIComponent(f[1].replace(/\+/g," ")),e=f}else console.log("Desktop URL"),e=d("v",c);console.log("Inside getYoutube()");var g="https://www.googleapis.com/youtube/v3/videos?id=",h=e,i="AIzaSyDEOt5nyqmEtKbJxDXeb83IFkOnPPvqtYk",j="&part=snippet,contentDetails,statistics,status";g=g+h+"&key="+i+j,b.get(g).success(function(b){console.log(b);var d={title:b.items[0].snippet.title,imgUrl:b.items[0].snippet.thumbnails.medium.url,viewCount:b.items[0].statistics.viewCount,likeCount:b.items[0].statistics.likeCount,url:c,upvotes:0};a.urls.$add(d),a.newUrlText=""})}}]),angular.module("bestOfYoutubeApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("bestOfYoutubeApp").controller("AdminCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("bestOfYoutubeApp").controller("GroupIdCtrl",["$scope","$http","$firebaseObject","$firebaseArray","$mdDialog","$window","$routeParams",function(a,b,c,d,e,f,g){var h=new Firebase("https://the-best-of-youtube.firebaseio.com/urls"),i=new Firebase("https://the-best-of-youtube.firebaseio.com/data"),j=c(i);j.$bindTo(a,"data"),a.urls=d(h),a.groupNumber=g.id,parseInt(sessionStorage.getItem("upvotes"))||f.sessionStorage.setItem("upvotes",0),a.upvote=function(b,c){var d=parseInt(sessionStorage.getItem("upvotes"));if(f.sessionStorage.setItem("upvotes",d+1),parseInt(f.sessionStorage.getItem("upvotes"))>2)e.show(e.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Vote Count Exceeded!").textContent("Sorry, you can only vote twice.").ariaLabel("Alert Dialog Demo").ok("Okay!").targetEvent(c));else{var g=a.urls.$getRecord(b.$id);g.upvotes++,a.urls.$save(g).then(function(){console.log(a.urls)})}},a.remove=function(b,c){var d=e.confirm().title("Would you like to delete this video entry?").textContent("You will have to input the link again").ariaLabel("Lucky day").targetEvent(c).ok("Yes, Delete").cancel("No, Don't Do it");e.show(d).then(function(){a.urls.$remove(b),a.status="You decided to get rid of your debt."},function(){a.status="You decided to keep your debt."})};a.getYoutube=function(b,c){var d=function(a,b){var c=RegExp("[?&]"+a+"=([^&]*)").exec(b);return c&&decodeURIComponent(c[1].replace(/\+/g," "))},f="";if(/youtu.be/.test(b)){console.log("Mobile URL");var g=RegExp(".be/([^]*)").exec(b);g=decodeURIComponent(g[1].replace(/\+/g," ")),f=g,a.runYouTubeData(f)}else/youtube/.test(b)?(console.log("Desktop URL"),f=d("v",b),a.runYouTubeData(b,f)):(e.show(e.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Sorry!").textContent("Please Enter a valid YouTube URL").ariaLabel("Alert Dialog Demo").ok("Okay!").targetEvent(c)),a.newUrlText="")},a.runYouTubeData=function(c,d){console.log("Inside getYoutube()");var e="https://www.googleapis.com/youtube/v3/videos?id=",f=d,g="AIzaSyDEOt5nyqmEtKbJxDXeb83IFkOnPPvqtYk",h="&part=snippet,contentDetails,statistics,status";e=e+f+"&key="+g+h,b.get(e).success(function(b){console.log(b);var d={title:b.items[0].snippet.title,imgUrl:b.items[0].snippet.thumbnails.medium.url,viewCount:b.items[0].statistics.viewCount,likeCount:b.items[0].statistics.likeCount,url:c,upvotes:0};a.urls.$add(d),a.newUrlText=""})}}]),angular.module("bestOfYoutubeApp").factory("ConfigOptions",function(){var a=42;return{someMethod:function(){return a}}}),angular.module("bestOfYoutubeApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/admin.html","<p>This is the admin view.</p>"),a.put("views/group.html",'<md-content class="md-padding" layout-xs="column" layout="row" layout-align="center center"> <div flex-xs flex-gt-xs="50" layout="column" layout-align="center center"> <h1>Group #{{ groupNumber }}</h1> </div> </md-content> <md-content class="md-padding" layout-xs="column" layout="row" layout-align="center center"> <div flex-xs flex-gt-xs="50" layout="column"> <form name="urlSubmission" ng-submit="getYoutube(newUrlText, $event)"> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>YouTube URL</label> <input ng-model="newUrlText"> </md-input-container> <md-button id="urlSubmit" type="submit" class="md-raised md-primary">Add Submission</md-button> </div> </form> </div> </md-content> <md-content class="md-padding" layout-xs="column" layout="row" layout-align="center center"> <div flex-xs flex-gt-xs="50" layout="column"> <md-card ng-repeat="url in urls | orderBy: \'-upvotes\'"> <md-card-title> <md-card-title-text> <span class="md-headline">{{ url.title }}</span> <span class="md-subhead">Views: {{ url.viewCount | number }}</span> <span>Total Votes: <strong>{{ url.upvotes }}</strong></span> </md-card-title-text> <md-card-title-media> <div class="md-media-md card-media" alt=""> <img src="{{ url.imgUrl }}" alt=""> </div> </md-card-title-media> </md-card-title> <md-card-actions layout="row" layout-align="end center"> <a href="{{ url.url }}" target="_blank"> <md-button class="md-fab md-raised" style="margin-right: 10px"><md-tooltip md-direction="left">Open Video</md-tooltip><ng-md-icon icon="open_in_new" style="fill: #9E9D9D"></ng-md-icon></md-button></a> <md-button class="md-primary md-fab md-raised" ng-click="upvote(url, $event)"><md-tooltip md-direction="top">Upvote</md-tooltip><ng-md-icon icon="star" style="fill: rgb(255,255,255)"></ng-md-icon></md-button> <md-button class="md-warn md-fab md-raised md-hue-2" ng-click="remove(url, $event)"> <md-tooltip md-direction="right">Delete</md-tooltip><ng-md-icon icon="delete" style="fill: rgb(255,255,255)"></ng-md-icon></md-button> </md-card-actions> </md-card> </div> </md-content>'),a.put("views/main.html",'<div class="jumbotron"> <h1>The Best of YouTube</h1> <p class="lead"> Finding YouTube\'s funniest videos. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Get Started! <span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>Testing Firebase</h4> <ul> <li ng-repeat="url in urls"> <!-- edit a message --> <input class="editBox" ng-model="url.title" ng-change="urls.$save(urls)"> <!-- delete a message --> <button ng-click="urls.$remove(url)">Delete Video</button> </li> </ul> <div class="panel panel-default" ng-repeat="url in urls"> <div class="panel-body"> <img class="panelImage" src="{{ url.imgUrl }}"> <a href="{{ url.url }}" target="_blank"><h3>{{ url.title }}</h3></a> <div class="statBox"> <p>Views: {{ url.viewCount | number }}</p> <p>Likes: {{ url.likeCount | number }}</p> </div> <ng-md-icon ng-click="upvote(url)" icon="favorite" style="color: blue; float: right"></ng-md-icon> </div> </div> <form ng-submit="getYoutube(newUrlText)"> <input ng-model="newUrlText"> <button type="submit">Add YouTube URL</button> </form> <input type="text" ng-model="data.text"> <p>You said: {{ data.text }}</p> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>')}]);